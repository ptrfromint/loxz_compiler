fun makeClosure(x) {
  fun inner() {
    return x + 1;
  }

  return inner;
}

var counter = 0;
for(var i = 0; i < 1000000; i = i + 1) {
  if (counter == 500) {
    print i;
    counter = 0;
  }

  var c = makeClosure(i);
  counter = counter + 1;
}
